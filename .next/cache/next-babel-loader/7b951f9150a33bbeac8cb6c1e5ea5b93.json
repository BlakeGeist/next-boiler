{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport absoluteUrl from './getAbsoluteUrl';\nimport nextCookie from 'next-cookies';\nimport cookie from 'js-cookie';\nexport default /*#__PURE__*/(function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var _absoluteUrl, apiURL, _nextCookie, token2, getUserResponse, user;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _absoluteUrl = absoluteUrl(ctx.req), apiURL = _absoluteUrl.apiURL;\n            _nextCookie = nextCookie(ctx), token2 = _nextCookie.token2;\n            _context.next = 4;\n            return axios.post(\"\".concat(apiURL, \"/api/getUserFromToken\"), {\n              token: token2\n            });\n\n          case 4:\n            getUserResponse = _context.sent;\n            user = getUserResponse.data.user;\n            user ? ctx.reduxStore.dispatch({\n              type: \"SET_ITEM\",\n              name: \"user\",\n              payload: user\n            }) : cookie.remove('token2');\n            user ? ctx.reduxStore.dispatch({\n              type: \"SET_ITEM\",\n              name: \"isLoggedIn\",\n              payload: true\n            }) : \"\";\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n})();","map":{"version":3,"sources":["C:/Users/Blake Geist/Documents/blakes-apps/react/next-firebase-boiler/src/app/pages/helpers/setUserState.js"],"names":["axios","absoluteUrl","nextCookie","cookie","ctx","req","apiURL","token2","post","token","getUserResponse","user","data","reduxStore","dispatch","type","name","payload","remove"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA;AAAA,sEAAe,iBAAOC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,2BACQH,WAAW,CAACG,GAAG,CAACC,GAAL,CADnB,EACHC,MADG,gBACHA,MADG;AAAA,0BAEQJ,UAAU,CAACE,GAAD,CAFlB,EAEHG,MAFG,eAEHA,MAFG;AAAA;AAAA,mBAGmBP,KAAK,CAACQ,IAAN,WAAcF,MAAd,4BAA6C;AAACG,cAAAA,KAAK,EAAEF;AAAR,aAA7C,CAHnB;;AAAA;AAGLG,YAAAA,eAHK;AAILC,YAAAA,IAJK,GAIED,eAAe,CAACE,IAAhB,CAAqBD,IAJvB;AAKVA,YAAAA,IAAD,GAASP,GAAG,CAACS,UAAJ,CAAeC,QAAf,CAAwB;AAAEC,cAAAA,IAAI,EAAE,UAAR;AAAoBC,cAAAA,IAAI,EAAE,MAA1B;AAAkCC,cAAAA,OAAO,EAAEN;AAA3C,aAAxB,CAAT,GAAsFR,MAAM,CAACe,MAAP,CAAc,QAAd,CAAtF;AACCP,YAAAA,IAAD,GAASP,GAAG,CAACS,UAAJ,CAAeC,QAAf,CAAwB;AAAEC,cAAAA,IAAI,EAAE,UAAR;AAAoBC,cAAAA,IAAI,EAAE,YAA1B;AAAwCC,cAAAA,OAAO,EAAE;AAAjD,aAAxB,CAAT,GAA4F,EAA5F;;AANW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAf;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import axios from 'axios'\r\nimport absoluteUrl from './getAbsoluteUrl'\r\nimport nextCookie from 'next-cookies'\r\nimport cookie from 'js-cookie'\r\n\r\nexport default async (ctx) => {\r\n    const { apiURL } = absoluteUrl(ctx.req)\r\n    const { token2 } = nextCookie(ctx)\r\n    const getUserResponse = await axios.post(`${apiURL}/api/getUserFromToken`, {token: token2})\r\n    const user = getUserResponse.data.user;\r\n    (user) ? ctx.reduxStore.dispatch({ type: \"SET_ITEM\", name: \"user\", payload: user }) : cookie.remove('token2');\r\n    (user) ? ctx.reduxStore.dispatch({ type: \"SET_ITEM\", name: \"isLoggedIn\", payload: true }) : \"\";\r\n}"]},"metadata":{},"sourceType":"module"}