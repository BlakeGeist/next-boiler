{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Formik, Field } from \"formik\";\nimport { connect } from \"react-redux\";\nimport { translate } from \"../../../../helpers/quickHelpers\";\nimport { EditorState, convertToRaw } from \"draft-js\";\nimport RichEditorExample from \"./RichEditor\";\nimport { stateToHTML } from \"draft-js-export-html\";\nimport createLinkifyPlugin from \"draft-js-linkify-plugin\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nconst AddProductFrom = ({\n  strings,\n  pageStrings,\n  lang\n}) => {\n  const db = firebase.firestore();\n  const dis = new EditorState.createEmpty();\n  const linkifyPlugin = createLinkifyPlugin();\n  const plugins = [linkifyPlugin];\n  return __jsx(Formik, {\n    initialValues: {\n      name: \"\",\n      editorState: dis\n    },\n    validate: values => {\n      const errors = {};\n\n      if (!values.name) {\n        errors.name = \"Required\";\n      }\n\n      return errors;\n    },\n    onSubmit: async (values, {\n      setSubmitting\n    }) => {\n      const contentState = values.editorState.getCurrentContent();\n      let html = stateToHTML(contentState);\n      const productsCollection = db.collection(\"products\");\n      const product = {\n        name: values.name,\n        description: html\n      };\n      await productsCollection.doc(values.name).set(product).then(() => {}).catch(e => {\n        res.json({\n          error: e\n        });\n      });\n      setSubmitting(false);\n    }\n  }, ({\n    values,\n    errors,\n    touched,\n    handleSubmit,\n    isSubmitting,\n    setFieldValue,\n    handleBlur\n  }) => __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-2541701229\"\n  }, __jsx(\"label\", {\n    className: \"jsx-2541701229\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2541701229\"\n  }, translate(\"PRODUCT-NAME\", pageStrings, lang)), __jsx(Field, {\n    name: \"name\",\n    className: \"form-input\"\n  }), errors.name && touched.name && errors.name), __jsx(\"label\", {\n    className: \"jsx-2541701229\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2541701229\"\n  }, translate(\"DESCRIPTION\", pageStrings, lang)), __jsx(RichEditorExample, {\n    editorState: values.editorState,\n    onChange: setFieldValue,\n    onBlur: handleBlur,\n    plugins: plugins\n  }), errors.editorState && touched.editorState && errors.editorState), __jsx(\"button\", {\n    type: \"submit\",\n    disabled: isSubmitting,\n    className: \"jsx-2541701229\"\n  }, translate(\"SUBMIT\", strings, lang)), __jsx(_JSXStyle, {\n    id: \"2541701229\"\n  }, [\".RichEditor-root{background:#fff;border:1px solid #ddd;font-family:'Georgia',serif;font-size:14px;padding:15px;}\", \".RichEditor-editor{border-top:1px solid #ddd;cursor:text;font-size:16px;margin-top:10px;}\", \".RichEditor-editor .public-DraftEditorPlaceholder-root,.RichEditor-editor .public-DraftEditor-content{margin:0 -15px -15px;padding:15px;}\", \".RichEditor-editor .public-DraftEditor-content{min-height:100px;}\", \".RichEditor-hidePlaceholder .public-DraftEditorPlaceholder-root{display:none;}\", \".RichEditor-editor .RichEditor-blockquote{border-left:5px solid #eee;color:#666;font-family:'Hoefler Text','Georgia',serif;font-style:italic;margin:16px 0;padding:10px 20px;}\", \".RichEditor-editor .public-DraftStyleDefault-pre{background-color:rgba(0,0,0,0.05);font-family:'Inconsolata','Menlo','Consolas',monospace;font-size:16px;padding:20px;}\", \".RichEditor-controls{font-family:'Helvetica',sans-serif;font-size:14px;margin-bottom:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}\", \".RichEditor-styleButton{color:#999;cursor:pointer;margin-right:16px;padding:2px 0;display:inline-block;}\", \".RichEditor-activeButton{color:#5890ff;}\", \".draftJsLinkifyPlugin__link__2ittM,.draftJsLinkifyPlugin__link__2ittM:visited{color:#5e93c5;-webkit-text-decoration:none;text-decoration:none;}\", \".draftJsLinkifyPlugin__link__2ittM:hover,.draftJsLinkifyPlugin__link__2ittM:focus{color:#7eadda;outline:0;cursor:pointer;}\", \".draftJsLinkifyPlugin__link__2ittM:active{color:#4a7bab;}\"])));\n};\n\nexport default connect(state => state)(AddProductFrom);","map":null,"metadata":{},"sourceType":"module"}